{"version":3,"sources":["../../src/pages/battle/battle.module.ts","../../src/pages/battle/battle.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACM;AACL;AAMhD,IAAa,gBAAgB;IAA7B;IAA+B,CAAC;IAAD,uBAAC;AAAD,CAAC;AAAnB,gBAAgB;IAJ5B,8EAAQ,CAAC;QACR,YAAY,EAAE,CAAC,2DAAU,EAAE,8DAAa,CAAC;QACzC,OAAO,EAAE,CAAC,6DAAY,EAAE,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC,CAAC;KAC9D,CAAC;GACW,gBAAgB,CAAG;AAAH;;;;;;;;;;;;;;;ACT7B;AAAA,+BAA+B;;;;;;;;;;;;;;;;;;;;AAEmD;AACd;AAElB;AACc;AAE1B;AAUtC,IAAa,UAAU;IAAS,8BAAa;IAQ3C,oBACS,QAAkB,EAClB,MAAc,EACd,OAAsB,EACtB,SAAoB;QAJ7B,YAME,kBAAM,QAAQ,EAAE,MAAM,EAAE,OAAO,CAAC,SACjC;QANQ,cAAQ,GAAR,QAAQ,CAAU;QAClB,YAAM,GAAN,MAAM,CAAQ;QACd,aAAO,GAAP,OAAO,CAAe;QACtB,eAAS,GAAT,SAAS,CAAW;QAT7B,YAAM,GAAW,IAAI,uDAAM,EAAE,CAAC;;IAY9B,CAAC;IAED,6BAAQ,GAAR;QAAA,iBAQC;QAPC,iBAAM,QAAQ,WAAE,CAAC;QAEjB,IAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QACpD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAM,IAAI,YAAI,CAAC,MAAM,GAAG,MAAM,EAApB,CAAoB,CAAC,CAAC;QAC9E,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,aAAG,IAAI,YAAI,CAAC,OAAO,GAAG,GAAG,CAAC,IAAI,EAAvB,CAAuB,CAAC,CAAC;QAC9E,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,CAAE,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,CAAE,CAAC;QACjE,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;IACrC,CAAC;IAED,gCAAW,GAAX;QACE,iBAAM,WAAW,WAAE,CAAC;QAEpB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,uDAAM,EAAE,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;IAC1B,CAAC;IAED,iCAAY,GAAZ,UAAa,IAAI;QACf,EAAE,EAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC;QAC3B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAEH,iBAAC;AAAD,CAAC,CAxC+B,iFAAa,GAwC5C;AAxCY,UAAU;IARtB,uFAAS,CAAC;QACT,OAAO,EAAE,oBAAoB;QAC7B,cAAc,EAAE,CAAC,UAAU,CAAC;KAC7B,CAAC;IACD,+EAAS,CAAC;QACT,QAAQ,EAAE,aAAa;OACG;KAC3B,CAAC;kEAU2B;QACV,oEAAM;QACL,kEAAa;QACX,OAAS;AA4B9B;SAxCY,UAAU;AA6CvB,IAAa,aAAa;IAA1B;IAMA,CAAC;IALC,6BAA8C;QAC5C,OAAO,GAAG,GAAe;QACzB,EAAE,EAAC,CAAC,OAAO,CAAC;YAAC,MAAM,CAAC,EAAE,CAAC;MACkF;IAC3G,CAAC;IACH,CAAC;AAAD,CAAC;AANY,gFAAa;IAHzB,IAAI,CAAC;MACa;KAClB,CAAC;AAOD;SANY,aAAa,Y","file":"14.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { MomentModule } from 'angular2-moment';\nimport { BattlePage, HighlightPipe } from './battle';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [BattlePage, HighlightPipe],\n  imports: [MomentModule, IonicPageModule.forChild(BattlePage)]\n})\nexport class BattlePageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/battle/battle.module.ts","// import * as _ from 'lodash';\n\nimport { Component, OnInit, OnDestroy, Pipe, PipeTransform } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\nimport { AppState, Primus } from '../../services';\nimport { PlayComponent } from '../../components/play.component';\n\nimport { Battle } from '../../models';\n\n@IonicPage({\n  segment: 'battle/:battleName',\n  defaultHistory: ['overview']\n})\n@Component({\n  selector: 'page-battle',\n  templateUrl: 'battle.html'\n})\nexport class BattlePage extends PlayComponent implements OnInit, OnDestroy {\n\n  battle$: any;\n  battle: Battle = new Battle();\n\n  pet$: any;\n  petName: string;\n\n  constructor(\n    public appState: AppState,\n    public primus: Primus,\n    public navCtrl: NavController,\n    public navParams: NavParams\n  ) {\n    super(appState, primus, navCtrl);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    const battleName = this.navParams.get('battleName');\n    this.battle$ = this.appState.battle.subscribe(battle => this.battle = battle);\n    this.pet$ = this.appState.petactive.subscribe(pet => this.petName = pet.name);\n    this.battle.messageData = [ { data: null, message: 'Loading' } ];\n    this.primus.loadBattle(battleName);\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n\n    this.appState.battle.next(new Battle());\n    this.battle$.unsubscribe();\n    this.pet$.unsubscribe();\n  }\n\n  battleHeader(item) {\n    if(!item.data) return null;\n    return item.data;\n  }\n\n}\n\n@Pipe({\n  name: 'highlight'\n})\nexport class HighlightPipe implements PipeTransform {\n  transform(message: string, checkString: string): string {\n    message = message.trim();\n    if(!message) return '';\n    return message.replace(new RegExp(`(${checkString})`, 'gi'), '<span class=\"highlighted-text\">$1</span>');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/battle/battle.ts"],"sourceRoot":""}