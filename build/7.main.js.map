{"version":3,"sources":["../../src/pages/pets/pets.module.ts","../../src/pages/pets/pets.ts"],"names":[],"mappings":"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","file":"7.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { PetsPage } from './pets';\r\nimport { GlobalComponentsModule } from '../../components/components.module';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [PetsPage],\r\n  imports: [GlobalComponentsModule, IonicPageModule.forChild(PetsPage)]\r\n})\r\nexport class PetsPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pets/pets.module.ts","import * as _ from 'lodash';\r\n\r\nimport { Component, ViewChild } from '@angular/core';\r\nimport { IonicPage, NavController, MenuController, AlertController } from 'ionic-angular';\r\n\r\nimport { AppState, Primus, Theme } from '../../services';\r\nimport { PlayComponent } from '../../components/play.component';\r\n\r\nimport { PetsItemsPage } from './pets-items';\r\nimport { PetsOverviewPage } from './pets-overview';\r\n\r\nimport { PetBasic, PetActive, PetBuy, Item, Premium } from '../../models';\r\n\r\nimport { LocalStorageService } from 'ng2-webstorage';\r\n\r\n@IonicPage({\r\n  segment: 'pets'\r\n})\r\n@Component({\r\n  selector: 'page-pets',\r\n  templateUrl: 'pets.html'\r\n})\r\nexport class PetsPage extends PlayComponent {\r\n  public overviewRoot = PetsOverviewPage;\r\n  public itemsRoot = PetsItemsPage;\r\n\r\n  inventoryBadge: string = '';\r\n  hasPet: boolean;\r\n\r\n  petbasic$: any;\r\n  petbasic: PetBasic[] = [];\r\n\r\n  petactive$: any;\r\n  petactive: PetActive = new PetActive();\r\n\r\n  petbuy$: any;\r\n  petbuy: PetBuy = {};\r\n\r\n  petEquipment: Item[];\r\n\r\n  premium$: any;\r\n  premium: Premium = new Premium();\r\n\r\n  public defaultTab = 0;\r\n\r\n  @ViewChild('petPageContent')\r\n  public petPageContent;\r\n\r\n  constructor(\r\n    public appState: AppState,\r\n    public primus: Primus,\r\n    public navCtrl: NavController,\r\n    public menuCtrl: MenuController,\r\n    public alertCtrl: AlertController,\r\n    public theme: Theme,\r\n    public storage: LocalStorageService\r\n  ) {\r\n    super(appState, primus, navCtrl);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    this.petbasic$ = this.appState.petbasic.subscribe(data => this.petbasic = data);\r\n    this.petactive$ = this.appState.petactive.subscribe(data => this.setPetActive(data));\r\n    this.petbuy$ = this.appState.petbuy.subscribe(data => this.petbuy = data);\r\n    this.premium$ = this.appState.premium.subscribe(data => this.premium = data);\r\n\r\n    const tab = this.storage.retrieve('currentPetTab');\r\n    this.defaultTab = tab;\r\n\r\n    this.menuCtrl.enable(false, 'chat');\r\n    this.menuCtrl.enable(true, 'pets');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    super.ngOnDestroy();\r\n\r\n    this.petbasic$.unsubscribe();\r\n    this.petactive$.unsubscribe();\r\n    this.petbuy$.unsubscribe();\r\n    this.premium$.unsubscribe();\r\n  }\r\n\r\n  togglePetMenu() {\r\n    this.menuCtrl.toggle('right');\r\n  }\r\n\r\n  get shouldShowPetMenu() {\r\n    return this.petPageContent._elementRef.nativeElement.offsetWidth > 768;\r\n  }\r\n\r\n  setPetActive(petactive) {\r\n    this.hasPet = !!petactive.name\r\n    this.petactive = petactive;\r\n    this.petEquipment = _.flatten(_.values(petactive.equipment));\r\n    this.inventoryBadge = this.setBadge(petactive);\r\n  }\r\n\r\n  makeActive(petType) {\r\n    this.primus.makePetActive(petType);\r\n  }\r\n\r\n  buyPet(petType) {\r\n    this.alertCtrl.create({\r\n      cssClass: this.theme.currentTheme,\r\n      title: 'Adopt Pet',\r\n      message: `What would you like to call your pet ${petType}?`,\r\n      inputs: [{\r\n        name: 'name',\r\n        placeholder: 'Pet Name'\r\n      }],\r\n      buttons: [\r\n        { text: 'Cancel' },\r\n        { text: 'Buy', handler: data => {\r\n          this.primus.buyPet(petType, data.name);\r\n        } }\r\n      ]\r\n    }).present()\r\n  }\r\n\r\n  renamePet(petType, currentName) {\r\n    this.alertCtrl.create({\r\n      cssClass: this.theme.currentTheme,\r\n      title: 'Rename Pet',\r\n      message: `What would you like to call your pet ${petType}?`,\r\n      inputs: [{\r\n        name: 'name',\r\n        placeholder: 'Pet Name',\r\n        value: currentName\r\n      }],\r\n      buttons: [\r\n        { text: 'Cancel' },\r\n        { text: 'Rename', handler: data => {\r\n          this.primus.renamePet(petType, data.name);\r\n        } }\r\n      ]\r\n    }).present()\r\n  }\r\n\r\n  changeTab(newTab) {\r\n    this.storage.store('currentPetTab', newTab.index);\r\n  }\r\n\r\n  setBadge(data) {\r\n    if(!data.scaleLevel) return '';\r\n\r\n    return `${data.inventory.length}/${data.$scale.inventory[data.scaleLevel.inventory]}`;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pets/pets.ts"],"sourceRoot":""}