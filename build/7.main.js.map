{"version":3,"sources":["../../src/pages/pets/pets.module.ts","../../src/pages/pets/pets.ts"],"names":[],"mappings":"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","file":"7.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { PetsPage } from './pets';\nimport { GlobalComponentsModule } from '../../components/components.module';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [PetsPage],\n  imports: [GlobalComponentsModule, IonicPageModule.forChild(PetsPage)]\n})\nexport class PetsPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pets/pets.module.ts","import * as _ from 'lodash';\n\nimport { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, MenuController, AlertController } from 'ionic-angular';\n\nimport { AppState, Primus, Theme } from '../../services';\nimport { PlayComponent } from '../../components/play.component';\n\nimport { PetsItemsPage } from './pets-items';\nimport { PetsOverviewPage } from './pets-overview';\n\nimport { PetBasic, PetActive, PetBuy, Item, Premium } from '../../models';\n\nimport { LocalStorageService } from 'ng2-webstorage';\n\n@IonicPage({\n  segment: 'pets'\n})\n@Component({\n  selector: 'page-pets',\n  templateUrl: 'pets.html'\n})\nexport class PetsPage extends PlayComponent {\n  public overviewRoot = PetsOverviewPage;\n  public itemsRoot = PetsItemsPage;\n\n  inventoryBadge: string = '';\n  hasPet: boolean;\n\n  petbasic$: any;\n  petbasic: PetBasic[] = [];\n\n  petactive$: any;\n  petactive: PetActive = new PetActive();\n\n  petbuy$: any;\n  petbuy: PetBuy = {};\n\n  petEquipment: Item[];\n\n  premium$: any;\n  premium: Premium = new Premium();\n\n  public defaultTab = 0;\n\n  @ViewChild('petPageContent')\n  public petPageContent;\n\n  constructor(\n    public appState: AppState,\n    public primus: Primus,\n    public navCtrl: NavController,\n    public menuCtrl: MenuController,\n    public alertCtrl: AlertController,\n    public theme: Theme,\n    public storage: LocalStorageService\n  ) {\n    super(appState, primus, navCtrl);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.petbasic$ = this.appState.petbasic.subscribe(data => this.petbasic = data);\n    this.petactive$ = this.appState.petactive.subscribe(data => this.setPetActive(data));\n    this.petbuy$ = this.appState.petbuy.subscribe(data => this.petbuy = data);\n    this.premium$ = this.appState.premium.subscribe(data => this.premium = data);\n\n    const tab = this.storage.retrieve('currentPetTab');\n    this.defaultTab = tab;\n\n    this.menuCtrl.enable(false, 'chat');\n    this.menuCtrl.enable(true, 'pets');\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n\n    this.petbasic$.unsubscribe();\n    this.petactive$.unsubscribe();\n    this.petbuy$.unsubscribe();\n    this.premium$.unsubscribe();\n  }\n\n  togglePetMenu() {\n    this.menuCtrl.toggle('right');\n  }\n\n  get shouldShowPetMenu() {\n    return this.petPageContent._elementRef.nativeElement.offsetWidth > 768;\n  }\n\n  setPetActive(petactive) {\n    this.hasPet = !!petactive.name\n    this.petactive = petactive;\n    this.petEquipment = _.flatten(_.values(petactive.equipment));\n    this.inventoryBadge = this.setBadge(petactive);\n  }\n\n  makeActive(petType) {\n    this.primus.makePetActive(petType);\n  }\n\n  buyPet(petType) {\n    this.alertCtrl.create({\n      cssClass: this.theme.currentTheme,\n      title: 'Adopt Pet',\n      message: `What would you like to call your pet ${petType}?`,\n      inputs: [{\n        name: 'name',\n        placeholder: 'Pet Name'\n      }],\n      buttons: [\n        { text: 'Cancel' },\n        { text: 'Buy', handler: data => {\n          this.primus.buyPet(petType, data.name);\n        } }\n      ]\n    }).present()\n  }\n\n  renamePet(petType, currentName) {\n    this.alertCtrl.create({\n      cssClass: this.theme.currentTheme,\n      title: 'Rename Pet',\n      message: `What would you like to call your pet ${petType}?`,\n      inputs: [{\n        name: 'name',\n        placeholder: 'Pet Name',\n        value: currentName\n      }],\n      buttons: [\n        { text: 'Cancel' },\n        { text: 'Rename', handler: data => {\n          this.primus.renamePet(petType, data.name);\n        } }\n      ]\n    }).present()\n  }\n\n  changeTab(newTab) {\n    this.storage.store('currentPetTab', newTab.index);\n  }\n\n  setBadge(data) {\n    if(!data.scaleLevel) return '';\n\n    return `${data.inventory.length}/${data.$scale.inventory[data.scaleLevel.inventory]}`;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/pets/pets.ts"],"sourceRoot":""}