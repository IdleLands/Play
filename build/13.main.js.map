{"version":3,"sources":["../../src/pages/collectibles/collectibles.module.ts","../../src/pages/collectibles/collectibles.ts"],"names":[],"mappings":"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","file":"13.main.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CollectiblesPage } from './collectibles';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [CollectiblesPage],\r\n  imports: [IonicPageModule.forChild(CollectiblesPage)],\r\n})\r\nexport class CollectiblesPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collectibles/collectibles.module.ts","import * as _ from 'lodash';\r\n\r\nimport { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { IonicPage, NavController } from 'ionic-angular';\r\n\r\nimport { AppState, Primus } from '../../services';\r\nimport { PlayComponent } from '../../components/play.component';\r\n\r\nimport { Collectible, Collectibles } from '../../models';\r\n\r\n@IonicPage({\r\n  segment: 'collectibles'\r\n})\r\n@Component({\r\n  selector: 'page-collectibles',\r\n  templateUrl: 'collectibles.html'\r\n})\r\nexport class CollectiblesPage extends PlayComponent implements OnInit, OnDestroy {\r\n\r\n  public collectibles$: any;\r\n  public collectibles: Collectible[] = [];\r\n\r\n  constructor(\r\n    public appState: AppState,\r\n    public primus: Primus,\r\n    public navCtrl: NavController\r\n  ) {\r\n    super(appState, primus, navCtrl);\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    this.collectibles$ = this.appState.collectibles.subscribe(data => {\r\n      this.parseCollectibleData(data);\r\n    });\r\n\r\n    this.primus.requestCollectibles();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    super.ngOnDestroy();\r\n\r\n    this.collectibles$.unsubscribe();\r\n  }\r\n\r\n  parseCollectibleData(data: Collectibles) {\r\n    const { current, prior } = data;\r\n\r\n    this.collectibles = _(current)\r\n      .sortBy('name')\r\n      .each(coll => coll.count = 1);\r\n\r\n    _(prior)\r\n      .values()\r\n      .sortBy('name')\r\n      .each(coll => {\r\n        const prev = _.find(this.collectibles, { name: coll.name });\r\n        if(prev) {\r\n          prev.count += coll.count;\r\n        } else {\r\n          this.collectibles.push(coll);\r\n          coll._faded = true;\r\n        }\r\n      });\r\n\r\n    const sum = _.sumBy(this.collectibles, 'count');\r\n\r\n    let string = `Current Collectibles: ${current.length}`;\r\n    if(current.length !== this.collectibles.length) {\r\n      string += `<br>Total Collectibles: ${this.collectibles.length}<br>Collectible Sum: ${sum}`;\r\n    }\r\n    this.updatePageData(string);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collectibles/collectibles.ts"],"sourceRoot":""}