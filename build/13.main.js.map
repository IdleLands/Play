{"version":3,"sources":["../../src/pages/collectibles/collectibles.module.ts","../../src/pages/collectibles/collectibles.ts"],"names":[],"mappings":"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","file":"13.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CollectiblesPage } from './collectibles';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [CollectiblesPage],\n  imports: [IonicPageModule.forChild(CollectiblesPage)],\n})\nexport class CollectiblesPageModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collectibles/collectibles.module.ts","import * as _ from 'lodash';\n\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { IonicPage, NavController } from 'ionic-angular';\n\nimport { AppState, Primus } from '../../services';\nimport { PlayComponent } from '../../components/play.component';\n\nimport { Collectible, Collectibles } from '../../models';\n\n@IonicPage({\n  segment: 'collectibles'\n})\n@Component({\n  selector: 'page-collectibles',\n  templateUrl: 'collectibles.html'\n})\nexport class CollectiblesPage extends PlayComponent implements OnInit, OnDestroy {\n\n  public collectibles$: any;\n  public collectibles: Collectible[] = [];\n\n  constructor(\n    public appState: AppState,\n    public primus: Primus,\n    public navCtrl: NavController\n  ) {\n    super(appState, primus, navCtrl);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.collectibles$ = this.appState.collectibles.subscribe(data => {\n      this.parseCollectibleData(data);\n    });\n\n    this.primus.requestCollectibles();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n\n    this.collectibles$.unsubscribe();\n  }\n\n  parseCollectibleData(data: Collectibles) {\n    const { current, prior } = data;\n\n    this.collectibles = _(current)\n      .sortBy('name')\n      .each(coll => coll.count = 1);\n\n    _(prior)\n      .values()\n      .sortBy('name')\n      .each(coll => {\n        const prev = _.find(this.collectibles, { name: coll.name });\n        if(prev) {\n          prev.count += coll.count;\n        } else {\n          this.collectibles.push(coll);\n          coll._faded = true;\n        }\n      });\n\n    const sum = _.sumBy(this.collectibles, 'count');\n\n    let string = `Current Collectibles: ${current.length}`;\n    if(current.length !== this.collectibles.length) {\n      string += `<br>Total Collectibles: ${this.collectibles.length}<br>Collectible Sum: ${sum}`;\n    }\n    this.updatePageData(string);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/collectibles/collectibles.ts"],"sourceRoot":""}